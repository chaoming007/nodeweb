!function(t){function n(){var n=!0;return t.ajax({url:"/admin/useradd",type:"POST",dataType:"json",async:!1,data:{dataval:c.find(".u").val()}}).done(function(t){n=1==t.val}),n}function a(){function a(n,a){t("#"+n).html(a)}var o=c.find(".u"),r=c.find(".p"),i=c.find(".vp"),s="";return t(".t-ts").html(""),""==o.val()?(s="用户名不能为空",a("usernamets",s),!0):n()?(s="用户名已经存在",a("usernamets",s),!0):""==r.val()?(s="密码不能为空",a("passwordts",s),!0):i.val()!=r.val()?(s="前后密码输入不一致",a("vpasswordts",s),!0):void 0}function o(){function n(){var n=!0;return t.ajax({url:"/admin/sortedit",type:"POST",dataType:"json",async:!1,data:{dataval:a.val(),dataid:t("#sortid").val()}}).done(function(t){n=1==t.val}),n}var a=t("#sortname"),o=(t("#sortleve"),t("#sortts"));return o.html(""),""==a.val()?(o.html("分类名不能为空"),!0):!!n()&&(o.html("分类已经存在"),!0)}function r(){function n(){var n=!0;return t.ajax({url:"/admin/sortadd",type:"POST",dataType:"json",async:!1,data:{dataval:a.val()}}).done(function(t){n=1==t.val}),n}var a=t("#sortname"),o=(t("#sortleve"),t("#sortts"));return o.html(""),""==a.val()?(o.html("分类名不能为空"),!0):!!n()&&(o.html("分类已经存在"),!0)}function i(){var n={},a=t("input[name='showInp']"),o=t("input[name='showId']"),r=[],i=[];return a.each(function(n){return""==t(this).val()?(alert("文章等级不能为空"),!1):(r.push(t(this).val()),void i.push(o.eq(n).val()))}),n.valArr=r,n.idArr=i,n}function s(){var n=t("#password"),a=!0;t("#changeLink").click(function(){a?(n.show(),t(this).html("点击取消"),a=!1):(n.hide(),t(this).html("点击修改"),a=!0)}),t("#initpassword").on("click",function(){t.ajax({url:"/admin/userlist/initpassword",type:"POST",dataType:"json",async:!1,data:{id:t("#uid").val()}}).done(function(t){1==t.state&&alert("初始化成功，请牢记密码："+t.pw)})})}var e=t("#subBtn"),d=t("#succBox"),u=t("#delBtn"),l=t("#addBtn"),c=t("#addUserBox");t("#sortSubBtn");e.on("click",function(){t(this).hide(),d.show()}),u.on("click",function(){t(this).hide(),d.show()}),t("#formBox").on("submit",function(){return!a()&&(l.hide(),void d.show())}),t("#sortForm").on("submit",function(){return!o()&&(t("#sortSubBtn").hide(),void d.show())}),t("#sortListBox").on("submit",function(){var n=0;if(t("[name='sort']").each(function(a){t(this).prop("checked")&&(n+=1)}),0==n)return alert("你没有选择要删除的分类"),!1}),t("#sortAddForm").on("submit",function(){return!r()&&(t("#sortAdd").hide(),void d.show())}),t("#newListBox").on("submit",function(){var n=0;if(t("[name='news']").each(function(a){t(this).prop("checked")&&(n+=1)}),0==n)return alert("你没有选择要删除的新闻"),!1}),t("#updataNewVal").on("click",function(){var n=i();t.ajax({url:"/admin/newlist/newshow",type:"POST",dataType:"json",async:!1,data:{dId:n.idArr,dVal:n.valArr}}).done(function(t){tuff=1==t.val})}),s()}(jQuery);