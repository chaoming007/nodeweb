!function(n){function a(){n.ajax({url:"/register/clear",type:"POST",dataType:"JSON",data:{quitVal:"clear"}}).done(function(n){1==n.num&&window.location.reload()})}function e(a){a&&n.ajax({url:"/register/login",type:"POST",dataType:"Json",data:{username:a.username,password:a.password}}).done(function(a){return 3==a.stateNum?(g.addClass("warning"),void g.html("账号或密码错误")):4==a.stateNum?(g.addClass("warning"),void g.html("账号或密码错误")):void(0==a.stateNum&&(d.fadeOut(300),r.hide(),n("#logLinkBox").find(".userNameBox").html(a.userinfo.username),n("#logLinkBox").show(),window.location.reload()))}).fail(function(){console.log("登陆失败")})}var o=(n(window).height(),n(window).width()),i=n(document).height(),r=n("#loginLink"),t=n("#logId"),s=n("#regId"),d=n("#maskObj"),l=d.find(".close-btn"),u=n("#loginBtn"),g=n("#info"),c=n("#reginfo");d.height(i).width(o),d.find(".mask-bg").height(i).width(o),r.on("click",function(n){n.preventDefault,d.fadeIn(300)}),n("a[data-log='log']").on("click",function(n){n.preventDefault,d.fadeIn(300)}),l.on("click",function(n){n.preventDefault,d.fadeOut(300)}),n("#regLink").on("click",function(){t.hide(),s.show(),c.removeClass("warning"),c.html("请输入注册的用户名和密码"),n("#regusername").val(""),n("#regpassword").val(""),n("#vregpassword").val("")}),n("#logLink").on("click",function(){t.show(),s.hide(),g.removeClass("warning"),g.html("请输入正确的账号密码"),n("#username").val(""),n("#password").val("")}),n("#regBtn").on("click",function(){var a=n("#regusername").val(),e=n("#regpassword").val(),o=n("#vregpassword").val();return""==a?(c.addClass("warning"),void c.html("用户名不能为空")):""==e?(c.addClass("warning"),void c.html("密码不能为空")):e!==o?(c.addClass("warning"),void c.html("两次输入的密码不一致")):void n.ajax({url:"/register/reg",type:"POST",dataType:"JSON",data:{regusername:a,regpassword:e,vregpassword:o}}).done(function(a){return 0==a.statusNum?(t.show(),s.hide(),g.removeClass("warning"),g.html("请输入正确的账号密码"),n("#username").val(""),void n("#password").val("")):4==a.statusNum?(c.addClass("warning"),void c.html("用户名已经存在")):void 0})}),u.on("click",function(){var a={},o=!1,i=n("#username").val(),r=n("#password").val();return""==i?(g.addClass("warning"),void g.html("用户名不能为空")):""==r?(g.addClass("warning"),void g.html("密码不能为空")):(o=!0,a.username=i,a.password=r,a.tuff=o,void e(a))}),n("#logLinkBox").find(".quitLink").on("click",function(){a()})}(jQuery);